'use client'

import { usePathname, useRouter } from 'next/navigation'
import { createBrowserSupabaseClient } from '@/lib/supabase/client'
import { toast } from 'sonner'
import { LogOut } from 'lucide-react'

export default function MobileFooterMenu() {
    const pathname = usePathname()
    const router = useRouter()
    const supabase = createBrowserSupabaseClient()

    const navItems = [
        {
            label: 'Dashboard',
            path: '/dashboard',
            icon: (
                <svg
                    width="21"
                    height="18"
                    viewBox="0 0 21 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <g clipPath="url(#clip0_1_577)">
                        <path
                            d="M20.243 8.98242C20.243 9.61523 19.7156 10.1109 19.118 10.1109H17.993L18.0176 15.743C18.0176 15.8379 18.0105 15.9328 18 16.0277V16.5938C18 17.3707 17.3707 18 16.5938 18H16.0312C15.9926 18 15.9539 18 15.9152 17.9965C15.866 18 15.8168 18 15.7676 18H14.625H13.7812C13.0043 18 12.375 17.3707 12.375 16.5938V15.75V13.5C12.375 12.8777 11.8723 12.375 11.25 12.375H9C8.37773 12.375 7.875 12.8777 7.875 13.5V15.75V16.5938C7.875 17.3707 7.2457 18 6.46875 18H5.625H4.50352C4.45078 18 4.39805 17.9965 4.34531 17.993C4.30312 17.9965 4.26094 18 4.21875 18H3.65625C2.8793 18 2.25 17.3707 2.25 16.5938V12.6562C2.25 12.6246 2.25 12.5895 2.25352 12.5578V10.1109H1.125C0.492188 10.1109 0 9.61875 0 8.98242C0 8.66602 0.105469 8.38477 0.351562 8.13867L9.36562 0.28125C9.61172 0.0351562 9.89297 0 10.1391 0C10.3852 0 10.6664 0.0703125 10.8773 0.246094L19.8562 8.13867C20.1375 8.38477 20.2781 8.66602 20.243 8.98242Z"
                            fill="white"
                        />
                    </g>
                    <defs>
                        <clipPath id="clip0_1_577">
                            <path d="M0 0H20.25V18H0V0Z" fill="white" />
                        </clipPath>
                    </defs>
                </svg>
            ),
        },
        {
            label: 'Schedule',
            path: '/schedule',
            icon: (
                <svg
                    width="18"
                    height="16"
                    viewBox="0 0 18 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M2.25 1.125C2.25 0.502734 1.74727 0 1.125 0C0.502734 0 0 0.502734 0 1.125V12.9375C0 14.4914 1.25859 15.75 2.8125 15.75H16.875C17.4973 15.75 18 15.2473 18 14.625C18 14.0027 17.4973 13.5 16.875 13.5H2.8125C2.50312 13.5 2.25 13.2469 2.25 12.9375V1.125ZM16.5445 4.16953C16.984 3.73008 16.984 3.01641 16.5445 2.57695C16.1051 2.1375 15.3914 2.1375 14.952 2.57695L11.25 6.28242L9.23203 4.26445C8.79258 3.825 8.07891 3.825 7.63945 4.26445L3.70195 8.20195C3.2625 8.64141 3.2625 9.35508 3.70195 9.79453C4.14141 10.234 4.85508 10.234 5.29453 9.79453L8.4375 6.65508L10.4555 8.67305C10.8949 9.1125 11.6086 9.1125 12.048 8.67305L16.548 4.17305L16.5445 4.16953Z"
                        fill="#4B5563"
                    />
                </svg>
            ),
        },
        {
            label: 'Prescriptions',
            path: '/prescriptions',
            icon: (
                <svg
                    width="16"
                    height="18"
                    viewBox="0 0 16 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M7.875 9C9.06847 9 10.2131 8.52589 11.057 7.68198C11.9009 6.83807 12.375 5.69347 12.375 4.5C12.375 3.30653 11.9009 2.16193 11.057 1.31802C10.2131 0.474106 9.06847 0 7.875 0C6.68153 0 5.53693 0.474106 4.69302 1.31802C3.84911 2.16193 3.375 3.30653 3.375 4.5C3.375 5.69347 3.84911 6.83807 4.69302 7.68198C5.53693 8.52589 6.68153 9 7.875 9ZM4.5 10.9406C1.89844 11.7035 0 14.1082 0 16.9559C0 17.5324 0.467578 18 1.04414 18H14.7059C15.2824 18 15.75 17.5324 15.75 16.9559C15.75 14.1082 13.8516 11.7035 11.25 10.9406V12.7266C12.2203 12.9762 12.9375 13.8586 12.9375 14.9062V16.3125C12.9375 16.6219 12.6844 16.875 12.375 16.875H11.8125C11.5031 16.875 11.25 16.6219 11.25 16.3125C11.25 16.0031 11.5031 15.75 11.8125 15.75V14.9062C11.8125 14.284 11.3098 13.7812 10.6875 13.7812C10.0652 13.7812 9.5625 14.284 9.5625 14.9062V15.75C9.87187 15.75 10.125 16.0031 10.125 16.3125C10.125 16.6219 9.87187 16.875 9.5625 16.875H9C8.69063 16.875 8.4375 16.6219 8.4375 16.3125V14.9062C8.4375 13.8586 9.15469 12.9762 10.125 12.7266V10.7191C9.91406 10.698 9.69961 10.6875 9.48164 10.6875H6.26836C6.05039 10.6875 5.83594 10.698 5.625 10.7191V13.0184C6.43711 13.2609 7.03125 14.0133 7.03125 14.9062C7.03125 15.9926 6.14883 16.875 5.0625 16.875C3.97617 16.875 3.09375 15.9926 3.09375 14.9062C3.09375 14.0133 3.68789 13.2609 4.5 13.0184V10.9406ZM5.0625 15.75C5.28628 15.75 5.50089 15.6611 5.65912 15.5029C5.81736 15.3446 5.90625 15.13 5.90625 14.9062C5.90625 14.6825 5.81736 14.4679 5.65912 14.3096C5.50089 14.1514 5.28628 14.0625 5.0625 14.0625C4.83872 14.0625 4.62411 14.1514 4.46588 14.3096C4.30764 14.4679 4.21875 14.6825 4.21875 14.9062C4.21875 15.13 4.30764 15.3446 4.46588 15.5029C4.62411 15.6611 4.83872 15.75 5.0625 15.75Z"
                        fill="#4B5563"
                    />
                </svg>
            ),
        },
        {
            label: 'Lab Results',
            path: '/lab-results',
            icon: (
                <svg
                    width="16"
                    height="18"
                    viewBox="0 0 16 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M7.875 9C9.06847 9 10.2131 8.52589 11.057 7.68198C11.9009 6.83807 12.375 5.69347 12.375 4.5C12.375 3.30653 11.9009 2.16193 11.057 1.31802C10.2131 0.474106 9.06847 0 7.875 0C6.68153 0 5.53693 0.474106 4.69302 1.31802C3.84911 2.16193 3.375 3.30653 3.375 4.5C3.375 5.69347 3.84911 6.83807 4.69302 7.68198C5.53693 8.52589 6.68153 9 7.875 9ZM6.26836 10.6875C2.80547 10.6875 0 13.493 0 16.9559C0 17.5324 0.467578 18 1.04414 18H14.7059C15.2824 18 15.75 17.5324 15.75 16.9559C15.75 13.493 12.9445 10.6875 9.48164 10.6875H6.26836Z"
                        fill="#4B5563"
                    />
                </svg>
            ),
        },
        {
            label: 'Settings',
            path: '/settings',
            icon: (
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_1_589)">
                        <path d="M17.434 5.85703C17.5465 6.16289 17.4516 6.50391 17.209 6.72187L15.6867 8.10703C15.7254 8.39883 15.7465 8.69766 15.7465 9C15.7465 9.30234 15.7254 9.60117 15.6867 9.89297L17.209 11.2781C17.4516 11.4961 17.5465 11.8371 17.434 12.143C17.2793 12.5613 17.093 12.9621 16.8785 13.3488L16.7133 13.6336C16.4812 14.0203 16.2211 14.3859 15.9363 14.7305C15.7289 14.9836 15.3844 15.068 15.075 14.9695L13.1168 14.3473C12.6457 14.7094 12.1254 15.0117 11.5699 15.2402L11.1305 17.2477C11.0602 17.5676 10.8141 17.8207 10.4906 17.8734C10.0055 17.9543 9.50625 17.9965 8.99648 17.9965C8.48672 17.9965 7.9875 17.9543 7.50234 17.8734C7.17891 17.8207 6.93281 17.5676 6.8625 17.2477L6.42305 15.2402C5.86758 15.0117 5.34726 14.7094 4.87617 14.3473L2.92148 14.973C2.61211 15.0715 2.26758 14.9836 2.06016 14.734C1.77539 14.3895 1.51523 14.0238 1.2832 13.6371L1.11797 13.3523C0.903515 12.9656 0.717187 12.5648 0.562499 12.1465C0.449999 11.8406 0.544921 11.4996 0.787499 11.2816L2.30976 9.89648C2.27109 9.60117 2.25 9.30234 2.25 9C2.25 8.69766 2.27109 8.39883 2.30976 8.10703L0.787499 6.72187C0.544921 6.50391 0.449999 6.16289 0.562499 5.85703C0.717187 5.43867 0.903515 5.03789 1.11797 4.65117L1.2832 4.36641C1.51523 3.97969 1.77539 3.61406 2.06016 3.26953C2.26758 3.01641 2.61211 2.93203 2.92148 3.03047L4.87969 3.65273C5.35078 3.29063 5.87109 2.98828 6.42656 2.75977L6.86601 0.752344C6.93633 0.432422 7.18242 0.179297 7.50586 0.126562C7.99101 0.0421875 8.49023 0 9 0C9.50976 0 10.009 0.0421875 10.4941 0.123047C10.8176 0.175781 11.0637 0.428906 11.134 0.748828L11.5734 2.75625C12.1289 2.98477 12.6492 3.28711 13.1203 3.64922L15.0785 3.02695C15.3879 2.92852 15.7324 3.01641 15.9398 3.26602C16.2246 3.61055 16.4848 3.97617 16.7168 4.36289L16.882 4.64766C17.0965 5.03437 17.2828 5.43516 17.4375 5.85352L17.434 5.85703ZM9 11.8125C9.74592 11.8125 10.4613 11.5162 10.9887 10.9887C11.5162 10.4613 11.8125 9.74592 11.8125 9C11.8125 8.25408 11.5162 7.53871 10.9887 7.01126C10.4613 6.48382 9.74592 6.1875 9 6.1875C8.25408 6.1875 7.53871 6.48382 7.01126 7.01126C6.48382 7.53871 6.1875 8.25408 6.1875 9C6.1875 9.74592 6.48382 10.4613 7.01126 10.9887C7.53871 11.5162 8.25408 11.8125 9 11.8125Z" fill="#4B5563" />
                    </g>
                    <defs>
                        <clipPath id="clip0_1_589">
                            <path d="M0 0H18V18H0V0Z" fill="white" />
                        </clipPath>
                    </defs>
                </svg>


            ),
        },
    ]

    const handleLogout = async () => {
        await supabase.auth.signOut()
        toast.success('Logged out successfully!')
        router.push('/sign-in')
    }

    return (
        <nav className="
      fixed bottom-0 left-0 w-full h-16 bg-white border-t border-gray-200 
      flex justify-around items-center z-50
      md:hidden
    ">
            {navItems.map((item) => {
                const active = pathname === item.path

                return (
                    <button
                        key={item.path}
                        onClick={() => router.push(item.path)}
                        className="flex flex-col items-center justify-center group"
                    >
                        <span className={`${active ? "text-blue-600" : "text-gray-500"} group-hover:text-blue-500`}>
                            {item.icon}
                        </span>
                        <span className={`text-[10px] mt-1 ${active ? "text-blue-600 font-medium" : "text-gray-500"}`}>
                            {item.label}
                        </span>
                    </button>
                )
            })}

            {/* Logout Icon */}
            <button
                onClick={handleLogout}
                className="flex flex-col items-center justify-center text-red-500 hover:text-red-600"
            >
                <LogOut size={20} />
                <span className="text-[10px] mt-1">Logout</span>
            </button>
        </nav>
    )
}
